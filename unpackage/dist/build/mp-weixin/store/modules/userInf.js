"use strict";const e=require("../../common/vendor.js"),o=require("../../apis/user.js"),a=e.defineStore("userInf",(()=>{const a=e.ref(""),n=e.ref(""),r=e.ref({follows:0,fans:0,treeIdChange:!1,signature:"留下您的个性签名吧！"}),s=({avatar:e,nickname:o,address:a,gender:n,treeId:s,account:t,id:c})=>{r.value.avatar=e,r.value.nickName=o,r.value.address=a,r.value.gender=n,r.value.treeId=s,r.value.account=t,r.value.id=c};return{token:a,refreshToken:n,wxUserLogin:()=>{e.wx$1.login({success:e=>{if(console.log(e),"login:ok"===e.errMsg){console.log(e.code);const t={code:e.code};o.WxLogin(t).then((e=>{a.value=e.data.accessToken,n.value=e.data.refreshToken,s(e.data),console.log(r.value)}))}},fail(e){console.log(e)}})},accountInf:r,accountInfSet:s}}),{persist:{storage:{getItem:o=>e.index.getStorageSync(o),setItem(o,a){e.index.setStorageSync(o,a)}}}});exports.useUserStore=a;
